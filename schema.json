{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "ApplicationConfig",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "sources": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "organisations": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/OrganisationConfig"
      }
    },
    "profiles": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ProfileConfig"
      }
    },
    "filters": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/LogEntryCriteriaGroup"
      }
    }
  },
  "definitions": {
    "OrganisationConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": [
            "null",
            "string"
          ]
        },
        "uri": {
          "type": [
            "null",
            "string"
          ]
        },
        "organisationId": {
          "type": "integer",
          "format": "int32"
        },
        "clientSecret": {
          "type": [
            "null",
            "string"
          ]
        },
        "clientId": {
          "type": [
            "null",
            "string"
          ]
        },
        "authPath": {
          "type": [
            "null",
            "string"
          ]
        },
        "authenticationMethod": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "$ref": "#/definitions/AuthenticationMethods"
            }
          ]
        }
      }
    },
    "AuthenticationMethods": {
      "type": "string",
      "description": "",
      "x-enumNames": [
        "GetOAuth2_OpenIdConnectClient",
        "GetOAuth2_ApplicationFlowClient"
      ],
      "enum": [
        "GetOAuth2_OpenIdConnectClient",
        "GetOAuth2_ApplicationFlowClient"
      ]
    },
    "ProfileConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "traces": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/TraceConfig"
          }
        },
        "unhandeled": {
          "$ref": "#/definitions/UnhandeledConfig"
        }
      }
    },
    "TraceConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "unit": {
          "type": "string"
        },
        "color": {
          "type": "integer",
          "format": "color-hex",
          "x-example": "#FF0000"
        },
        "visible": {
          "$ref": "#/definitions/VisibleOptions"
        },
        "offset": {
          "type": "number",
          "format": "float"
        },
        "scale": {
          "type": "number",
          "format": "float"
        },
        "drawStyle": {
          "$ref": "#/definitions/DrawStyles"
        },
        "drawOption": {
          "$ref": "#/definitions/DrawOptions"
        },
        "stateNames": {
          "type": [
            "null",
            "object"
          ],
          "additionalProperties": {
            "type": "string"
          }
        },
        "includeLogs": {
          "$ref": "#/definitions/LogEntryCriteriaGroup"
        }
      }
    },
    "VisibleOptions": {
      "type": "string",
      "description": "",
      "x-enumNames": [
        "Always",
        "WhenData",
        "Never"
      ],
      "enum": [
        "Always",
        "WhenData",
        "Never"
      ]
    },
    "DrawStyles": {
      "type": "string",
      "description": "",
      "x-enumNames": [
        "Points",
        "Lines",
        "NonInterpolatedLine",
        "DiscreteSingal",
        "State",
        "Cross"
      ],
      "enum": [
        "Points",
        "Lines",
        "NonInterpolatedLine",
        "DiscreteSingal",
        "State",
        "Cross"
      ]
    },
    "DrawOptions": {
      "type": "string",
      "description": " (Comma-separated flags allowed)",
      "pattern": "^(None|ShowCrosses|ExtendBegin|ExtendEnd|ShowScale|DrawNames)(,\\s*(None|ShowCrosses|ExtendBegin|ExtendEnd|ShowScale|DrawNames))*$",
      "x-example": "None, ShowCrosses, ExtendBegin, ExtendEnd, ShowScale, DrawNames",
      "x-enumFlags": true,
      "x-enumNames": [
        "None",
        "ShowCrosses",
        "ExtendBegin",
        "ExtendEnd",
        "ShowScale",
        "DrawNames"
      ]
    },
    "LogEntryCriteriaGroup": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "criteriaSets": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/LogEntryCriteriaSet"
          }
        }
      }
    },
    "LogEntryCriteriaSet": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "conditions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/LogEntryCondition"
          }
        }
      }
    },
    "LogEntryCondition": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "key": {
          "$ref": "#/definitions/LogKeys"
        },
        "operator": {
          "$ref": "#/definitions/ComparisonOperator"
        },
        "value": {
          "type": ["string", "number"]
        }
      }
    },
    "LogKeys": {
      "type": "string",
      "description": "",
      "x-enumNames": [
        "TimeStamp",
        "Measurement",
        "SoftwareId",
        "DeviceId",
        "LogCode",
        "Version",
        "RawData"
      ],
      "enum": [
        "TimeStamp",
        "Measurement",
        "SoftwareId",
        "DeviceId",
        "LogCode",
        "Version",
        "RawData"
      ]
    },
    "ComparisonOperator": {
      "type": "string",
      "description": "",
      "x-enumNames": [
        "Equals"
      ],
      "enum": [
        "Equals"
      ]
    },
    "UnhandeledConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "offset": {
          "type": "integer",
          "format": "int32"
        },
        "nameKey": {
          "type": "string"
        }
      }
    }
  }
}